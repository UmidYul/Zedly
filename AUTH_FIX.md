# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–£–¥–∞–ª—ë–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç –ª–æ–≥–∞—É—Ç–∞**
   - –í `dashboard.html` –±—ã–ª —Å–∫—Ä—ã—Ç—ã–π `<a href="#" id="logoutLink">` –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
   - –ö–ª–∏–∫ –Ω–∞ –Ω–µ–≥–æ –≤—ã–∑—ã–≤–∞–ª –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ "#" –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª—ë–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π dropdown menu

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞**
   - –í `auth-interceptor.js` –±—ã–ª —É–∫–∞–∑–∞–Ω `/login.html` –≤–º–µ—Å—Ç–æ `/login`
   - **–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ `/login` (–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø—É—Ç—å)

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º**
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â—ë–Ω –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –µ—Å–ª–∏ —É–∂–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (!window.location.pathname.includes('/login'))`

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞**
   - LocalStorage –º–æ–≥ –Ω–µ —É—Å–ø–µ—Ç—å –∑–∞–ø–∏—Å–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ 100ms –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∑–∞–ø–∏—Å–∏

### 5. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã `e.preventDefault()` –¥–ª—è logout –∫–Ω–æ–ø–æ–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
cd /Users/premium/Desktop/Zedly/backend
npm start
```

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–ª–∞–¥–∫–∏

–í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:5000/debug-auth.html**

–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω–æ–≤ –≤ localStorage
- üîë –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üß™ –¢–µ—Å—Ç—ã API endpoints

### –®–∞–≥ 3: –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ debug-auth.html –Ω–∞–∂–º–∏—Ç–µ **"–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ"**
2. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   localStorage.clear();
   ```

### –®–∞–≥ 4: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000/login
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - **–õ–æ–≥–∏–Ω:** superadmin
   - **–ü–∞—Ä–æ–ª—å:** admin123
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üì° Sending login request...
Login response status: 200
‚úÖ Login successful
Access token: received
Refresh token: received
‚úì Access token stored
‚úì Refresh token stored
‚úì User info stored
Verifying localStorage:
- access_token: EXISTS
- refresh_token: EXISTS
- user: EXISTS
üîÑ Redirecting to dashboard...
```

–ó–∞—Ç–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ dashboard:
```
üîê Checking authentication...
Access token exists: true
üì° Fetching user info from /api/auth/me
Response status: 200
‚úÖ User authenticated: {username: "superadmin", role: "superadmin", ...}
Dashboard initialized ‚úì
```

## ‚ùå –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å—ë –µ—â—ë –µ—Å—Ç—å:

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
psql -U postgres -d zedly -c "SELECT username, role, is_active FROM users;"
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ is_active = true

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª:

```bash
cat /Users/premium/Desktop/Zedly/backend/.env
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `JWT_SECRET`
- `JWT_REFRESH_SECRET`
- `DB_PASSWORD`

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
cd /Users/premium/Desktop/Zedly/database
./reset_db.sh  # –∏–ª–∏ reset_db.bat –Ω–∞ Windows
psql -U postgres -d zedly -f seed_safe.sql
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ —á–µ—Ä–µ–∑ debug-auth.html

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ http://localhost:5000/debug-auth.html –∏ –Ω–∞–∂–º–∏—Ç–µ:

1. **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å /api/auth/me"** - –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
2. **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å /api/auth/refresh"** - –ø–æ–ø—Ä–æ–±—É–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω

–ï—Å–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ.

## üìù –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

| –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|---------|---------|
| "No access token found" | –¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è | –û—á–∏—Å—Ç–∏—Ç–µ localStorage –∏ –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞ |
| "Token expired" | –¢–æ–∫–µ–Ω –∏—Å—Ç—ë–∫ (15 –º–∏–Ω—É—Ç) | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å refresh" |
| "Invalid token" | –ù–µ–≤–µ—Ä–Ω—ã–π JWT_SECRET | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env |
| Status 401 | –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π | –û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞ |
| Status 404 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö |

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ. –¢–µ–ø–µ—Ä—å:

1. ‚úÖ Logout –∫–Ω–æ–ø–∫–∞ –≤ —Å–∞–π–¥–±–∞—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –æ—à–∏–±–∫–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ debug-auth.html –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–π—á–∞—Å:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
cd /Users/premium/Desktop/Zedly/backend
npm start

# 2. –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
# 3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:5000/login
# 4. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ superadmin / admin123
# 5. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
```

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è, –æ—Ç–∫—Ä–æ–π—Ç–µ debug-auth.html –∏ –ø—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ —Å–∫—Ä–∏–Ω—à–æ—Ç!
